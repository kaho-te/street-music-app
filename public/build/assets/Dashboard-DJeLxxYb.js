import{r as a,j as t,a as g}from"./app-DoXcT2EI.js";import{R as f}from"./RecordRTC-DUbwg6C8.js";import{A as p}from"./AuthenticatedLayout-C29VWcra.js";import"./transition-DjGXBMAP.js";const j=()=>{const e=new Date,r=e.getFullYear(),o=e.getMonth()+1,n=e.getDate(),c=e.getHours(),l=e.getMinutes(),i=e.getSeconds();return`${r}/${o}/${n} ${c}:${l}:${i}`},b=()=>{const[e,r]=a.useState(null),[o,n]=a.useState(!1),[c,l]=a.useState(""),[i,x]=a.useState([]),u=async()=>{try{const s=await navigator.mediaDevices.getUserMedia({audio:!0,video:!1}),d=new f(s,{type:"audio"});d.startRecording(),r(d),n(!0)}catch(s){s instanceof Error&&l("録音の開始に失敗しました: "+s.message)}},m=()=>{e&&e.stopRecording(()=>{const s=e.getBlob();n(!1);const d=Math.random().toString(32).substring(2)+new Date().getTime().toString(32),h={audioURL:URL.createObjectURL(s),blob:s,id:d,recDate:j()};x([...i,h])})};return a.useEffect(()=>()=>{e&&e.destroy()},[e]),t.jsxs("div",{children:[t.jsx("div",{className:"fixed bottom-0 left-1/2 -translate-x-1/2 flex flex-col justify-center items-center z-50 w-375 py-16",children:t.jsx(v,{isRecording:o,stopCallback:m,startCallback:u})}),t.jsxs("section",{children:[t.jsx("div",{className:"flex flex-col gap-8 max-h-240 overflow-y-scroll audio-cover",children:i.map(s=>t.jsx(R,{recording:s},s.id))}),c&&t.jsxs("p",{className:"text-red text-12",children:["エラー: ",c]})]})]})},R=({recording:e})=>t.jsx("article",{className:"border-b border-black-10 py-4",children:t.jsxs("div",{className:"p-12",children:[t.jsx("audio",{src:e.audioURL,controls:!0}),t.jsx("p",{className:"text-12 text-right pt-4",children:e.recDate})]})}),v=({isRecording:e,stopCallback:r,startCallback:o})=>t.jsx("button",{className:"rounded-full w-30 h-30 text-32 shadow-lg bg-[#E5671D] hover:bg-[#FFB2A9] duration-300 transition drop-shadow-md active:translate-y-3",onClick:e?r:o,type:"button",children:e?"■":"録音"});function S({auth:e}){return t.jsxs(p,{user:e.user,header:t.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Dashboard"}),children:[t.jsx(g,{title:"Dashboard"}),t.jsx("div",{className:"py-12",children:t.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:t.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:t.jsx("div",{className:"p-6 text-gray-900",children:"You're logged in!"})})})}),t.jsx(b,{})]})}export{S as default};
