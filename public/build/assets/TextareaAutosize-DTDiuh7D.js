import{_ as F,h as N,I as R,f as S,M as _,b as z}from"./ButtonBase-Fhvr62SK.js";import{r,j as w}from"./app-au_dz3zB.js";const j=["onChange","maxRows","minRows","style","value"];function f(o){return parseInt(o,10)||0}const B={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function I(o){return o==null||Object.keys(o).length===0||o.outerHeightStyle===0&&!o.overflowing}const V=r.forwardRef(function(a,H){const{onChange:p,maxRows:g,minRows:c=1,style:C,value:v}=a,E=F(a,j),{current:T}=r.useRef(v!=null),u=r.useRef(null),W=N(H,u),y=r.useRef(null),m=r.useCallback(()=>{const e=u.current,t=R(e).getComputedStyle(e);if(t.width==="0px")return{outerHeightStyle:0,overflowing:!1};const n=y.current;n.style.width=t.width,n.value=e.value||a.placeholder||"x",n.value.slice(-1)===`
`&&(n.value+=" ");const h=t.boxSizing,i=f(t.paddingBottom)+f(t.paddingTop),O=f(t.borderBottomWidth)+f(t.borderTopWidth),b=n.scrollHeight;n.value="x";const x=n.scrollHeight;let s=b;c&&(s=Math.max(Number(c)*x,s)),g&&(s=Math.min(Number(g)*x,s)),s=Math.max(s,x);const k=s+(h==="border-box"?i+O:0),A=Math.abs(s-b)<=1;return{outerHeightStyle:k,overflowing:A}},[g,c,a.placeholder]),d=r.useCallback(()=>{const e=m();if(I(e))return;const l=u.current;l.style.height=`${e.outerHeightStyle}px`,l.style.overflow=e.overflowing?"hidden":""},[m]);S(()=>{const e=()=>{d()};let l;const t=_(e),n=u.current,h=R(n);h.addEventListener("resize",t);let i;return typeof ResizeObserver<"u"&&(i=new ResizeObserver(e),i.observe(n)),()=>{t.clear(),cancelAnimationFrame(l),h.removeEventListener("resize",t),i&&i.disconnect()}},[m,d]),S(()=>{d()});const M=e=>{T||d(),p&&p(e)};return w.jsxs(r.Fragment,{children:[w.jsx("textarea",z({value:v,onChange:M,ref:W,rows:c},E)),w.jsx("textarea",{"aria-hidden":!0,className:a.className,readOnly:!0,ref:y,tabIndex:-1,style:z({},B.shadow,C,{paddingTop:0,paddingBottom:0})})]})});export{V as T};
